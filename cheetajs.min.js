/*! cheetajs 2013-11-18 */
window.attachEvent&&(window.prototype.addEventListener=window.document.prototype.addEventListener=HTMLElement.prototype.addEventListener=function(a,b){this.attachEvent("on"+a,b)}),function(){var $cheeta={templates:{},Model:function(a,b){return{__children:{},__value:null,__bindings:{},__parent:a,__update:function(){this.__hasChildren()||this.__forEachElem(function(a){"INPUT"===a.tagName?a.value=this.__value||null:a.innerHTML=this.__value||null})},__forEachElem:function(a){for(var b in this.__bindings)for(var c=this.__bindings[b],d=0;d<c.length;d++){var e=c[d];a.apply(this,[e])}},__hasChildren:function(){for(var a in this.__children)return!0;return!1},__bindElement:function(a,c,d,e){var f=this.__children[c];return null==f&&(f=e?new $cheeta.ArrayModel(this,b):new $cheeta.Model(this,b),e&&(a.style.display="none"),this.__children[c]=f),null==f.__bindings[d||c]&&(f.__bindings[d||c]=[]),f.__bindings[d||c].push(a),void 0===this[c]&&(null==this.__parent&&(window[c]=f),Object.defineProperty(this,c,{get length(){return this.__value.length},set:function(a){var b=this.__children[c];if(!(a instanceof Object)&&b.__hasChildren()&&null!=a)throw"Cannot set primitive value for model "+c;if(b.__value=a,b.__update(),a instanceof Object)for(var d in a)b[d]=a[d]},get:function(){var a=this.__children[c];return null==a.__value||a.__value instanceof Object?a:a.__value},enumerable:!0,configurable:!0})),f},get length(){return null==this.__value?0:this.__value.length},get __childrenLength(){var a=0;for(var b in this.__children)a++;return a}}},ArrayModel:function(a,b){var c={__update:function(){if(this.__childrenLength>this.length)for(var a=this.__childrenLength-1;a>=this.length;a--)this.__children[a].__forEachElem(function(b){b.parentNode.removeChild(b),delete this.__parent.__children[a],delete this.__parent[a]});else if(this.__childrenLength<this.length)for(var a=this.__childrenLength;a<this.length;a++)this.__forEachElem(function(b){var c=b.cloneNode(),d=$cheeta.compiler.findDirective(b,"bind");c.removeAttribute("bind."),c.removeAttribute("data-bind.");var e=d.split(/ +in +/g);c.setAttribute("bind.",e[1]+"."+a+" as "+e[0]),c.style.display="",b.parentNode.insertBefore(c,b),$cheeta.compiler.recursiveCompile(this.__parentModels,c,!0)})},push:function(){var a=this.__value.length;this.__value.push.apply(this.__value,arguments),this.__update();for(var b=this.__value.length,c=a;b>c;c++)this[c]=this.__value[c]},pop:function(){this.__value.pop.apply(this.__value,arguments),this.__update()},splice:function(){this.__value.splice.apply(this.__value,arguments),this.__update();for(var a=0;a<this.__value.length;a++)this[a]!=this.__value[a]&&(this[a]=this.__value[a])}},d=new $cheeta.Model(a,b);for(var e in c)d[e]=c[e];return d}};window.$cheeta=$cheeta,$cheeta.rootModel=new $cheeta.Model(null,"ROOT"),$cheeta.directives=[],$cheeta.directives.push({name:"bind",fn:function(a,b,c){null==c&&(c=[$cheeta.rootModel]);for(var d=a.split(/ *; */g),e=[],f=0;f<d.length;f++){var g,a=d[f],h=a.split(/ +in +/g);h.length>1?(g=h[1],isArray=!0):(g=h[0],isArray=!1),h=g.split(/ +as +/g),g=h[0];var i=h.length>1?h[1]:null;if("."===g.charAt(0))for(key in c[0].__bindings){g=key+g;break}h=g.split(/\./g),g=h[h.length-1];for(var j=h[0],k=$cheeta.rootModel,l=0;l<c.length&&(k=c[l],k=function(a,b){for(;a!=$cheeta.rootModel;){for(var c in a.__bindings)if(c==b)return a;a=a.__parent}return a}(k,j),k==$cheeta.rootModel);l++);for(var m=k==$cheeta.rootModel?0:1;m<h.length-1;m++)null==k[h[m]]&&k.__bindElement(b,h[m]),k=k[h[m]];k.__bindElement(b,g,i,isArray),isArray&&(k.__children[g].__parentModels=[k].concat(c)),e.push(k.__children[g])}return e}}),$cheeta.futureEvals=[],$cheeta.directives.push({name:"eval",fn:function(a){$cheeta.futureEvals.push(a)}}),$cheeta.directives.push({name:"template",fn:function(a,b,c){b.innerHTML=$cheeta.templates[a]||b.innerHTML;for(var d=b.childNodes,e=0;e<d.length;e++)$cheeta.compiler.recursiveCompile(c,d[e])}}),$cheeta.location={keyval:{},watchers:{},watch:function(a,b){a instanceof Function&&(b=a,a=""),null==this.watchers[a]&&(this.watchers[a]=[]),this.watchers[a].push(b)},unwatch:function(a,b){b instanceof Function&&(a=b,b="");var c=this.watchers[b];if(null!=c){var d=c.indexOf(a);d>-1&&c.splice(d,1)}},notify:function(a,b,c){var d=this.watchers[a];if(null!=d)for(var e=0;e<d.length;e++)d[e](b,c)},set:function(a,b){void 0==b&&(b=a,a="");var c=this.keyval[a];this.keyval[a]=b,window.location.hash=this.toHash(),this.notify(a,b,c)},toHash:function(){var a=this.keyval[""]||"";for(var b in this.keyval)b.length>0&&(a+=(a.length>0?"&":"")+b+"="+this.keyval[b]);return a},init:function(){var a=this;window.addEventListener("hashchange",function(){var b,c=window.location.hash,d=0,e="",f={};c=c.substring(c.length>1&&"&"==c.charAt(2)?2:1);for(var g=0;g<=c.length;g++)if("&"==c.charAt(g)||g==c.length){if(b=c.substring(d,g),null==a.keyval[e]||a.keyval[e]!=b){var h=a.keyval[e];a.keyval[e]=b,a.notify(e,b,h)}d=g+1,f[e]=!0,e=""}else"="==c.charAt(g)&&(e=c.substring(d,g),d=g+1);for(var e in a.keyval)if(null==f[e]){var h=a.keyval[e];delete a.keyval[e],a.notify(e,null,h)}},!1)}},$cheeta.compiler={recursiveCompile:function(a,b,c){if(b){var d=a;1===b.nodeType&&(d=this.compileDirectives(a,b)),this.recursiveCompile(d,b.firstChild),c||this.recursiveCompile(a,b.nextSibling)}},findDirective:function(a,b){return a.getAttribute(b+".")||a.getAttribute("data-"+b+".")},compileDirectives:function(a,b){for(var c=0;c<$cheeta.directives.length;c++){var d=this.findDirective(b,$cheeta.directives[c].name);null!=d&&(a=($cheeta.directives[c].fn(d,b,a)||[]).concat(a))}return a},compile:function(){scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var script=scripts[i];"text/cj-template"===script.getAttribute("type")&&($cheeta.templates[script.getAttribute("id")]=script.innerHTML)}var root=document.documentElement;this.recursiveCompile([],root);for(var i=0;i<$cheeta.futureEvals.length;i++)eval($cheeta.futureEvals[i])}},$cheeta.onload=function(){$cheeta.compiler.compile(),$cheeta.location.init()},window.addEventListener("load",$cheeta.onload,!1)}();
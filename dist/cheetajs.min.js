/*! cheetajs 2015-03-17 */
Object.isString=function(a){return"string"==typeof a||a instanceof String},Object.isFunction=function(a){return"function"==typeof a},Object.isBoolean=function(a){return"boolean"==typeof a},Object.isObject=function(a){return a instanceof Object},Object.isArray=function(a){return Array.isArray(a)},Object.copy=function(a,b){b=b||{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},Element.prototype.attr||(Element.prototype.attr=function(a,b){return null!=b?(this.setAttribute(a,b),this):this.getAttribute(a)||this.getAttribute("data-"+a)||a.indexOf(".",a.length-1)>-1&&this.getAttribute(a.substring(a.length-1))}),Element.prototype.removeAttr||(Element.prototype.removeAttr=function(a){return this.removeAttribute(a)||this.removeAttribute("data-"+a)}),Element.prototype.addClass||(Element.prototype.addClass=function(a){return null!=a&&(this.hasClass(a)||this.setAttribute("class",(this.getAttribute("class")?this.getAttribute("class")+" ":"")+a)),this}),Element.prototype.removeClass||(Element.prototype.removeClass=function(a){return null!=a&&this.hasClass(a)&&this.setAttribute("class",this.getAttribute("class").replace(new RegExp("("+a+"$)|( "+a+")","g"),"")),this}),Element.prototype.hasClass||(Element.prototype.hasClass=function(a){return this.getAttribute("class")&&this.getAttribute("class").split(" ").indexOf(a)>-1}),Element.prototype.add||(Element.prototype.add=function(a,b){if(a&&null!=a.length&&null!=a[0])for(var c=0;c<a.length;c++)this.add(a[c],b);else this.insertBefore(a,b&&this.childNodes[b]);return a.remove(),this}),Element.prototype.addBefore||(Element.prototype.addBefore=function(a){if(a&&null!=a.length&&null!=a[0])for(var b=0;b<a.length;b++)this.addBefore(a[b]);else this.parentNode.insertBefore(a,this);return this}),Element.prototype.addAfter||(Element.prototype.addAfter=function(a){if(a&&null!=a.length&&null!=a[0])for(var b=0;b<a.length;b++)this.addAfter(a[b]);else this.parentNode.insertBefore(a,this.nextSibling);return this}),Element.prototype.remove||(Element.prototype.remove=function(){return this.parentNode&&this.parentNode.removeChild(this),this}),Element.prototype.html||(Element.prototype.html=function(a){return this.innerHTML=a,this}),Element.prototype.wrap||(Element.prototype.wrap=function(a){return this.addAfter(a),this.remove(),a.add(this),this}),document.create||(document.create=function(a){if("<"===a.charAt(0)){var b=document.createElement("div");return b.innerHTML=a,b.removeChild(b.firstChild)}return document.createElement(a)}),window.El=document.create,function(){for(var a=Array.prototype.slice.call(arguments),b=0;b<a.length;b++)(a[b].prototype?a[b].prototype:a[b]).on=(a[b].prototype?a[b].prototype:a[b]).on||function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d].length>0&&this.addEventListener(c[d],b,!1)}}(Element,window,document),function(){for(var a=Array.prototype.slice.call(arguments),b=0;b<a.length;b++)(a[b].prototype?a[b].prototype:a[b]).off=(a[b].prototype?a[b].prototype:a[b]).off||function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d].length>0&&this.removeEventListener(c[d],b,!1)}}(Element,window,document),$cheeta=Oo={},$cheeta.Model=function(a,b){this.value=void 0,this.parent=b,this.names=[a],this.children={},this.ref=function(){for(var a="",b=this;null!=b.parent&&null!=b.names[0];)a=(b.hasSpecialChar?"['"+b.names[0]+"']":"."+b.names[0])+a,b=b.parent;return a.substring(1)},this.getValue=function(){return this.parent.value[this.names[0]]},this.setValue=function(a){this.value!==a&&(this.parent.value[this.names[0]]=a)},this.child=function(a,b){null==this.value&&(this.value=this.isArray?[]:{});var c=this.children[a];return void 0===c&&(c=new $cheeta.Model(a,this),c.interceptProp(this.value,a,b),this.children[a]=c,c.value=null==this.value?void 0:this.value[a]),c.hasSpecialChar=b,c},this.alias=function(a){null!=a&&a!==this.names[0]&&this.names.push(a)},this.valueChange=function(a,b){return document.dispatchEvent(new CustomEvent("Oo-model-change-"+this.ref(),{detail:{value:a,oldValue:b,target:this}})),this},this.interceptArray=function(){if(null!=this.value){var a=new this.ArrayInterceptor(this);for(var b in a)if(a.hasOwnProperty(b)){if(this.value[b]===a[b])break;this.value[b]=a[b]}}this.child("length",this.value.length,!0)},this.interceptProp=function(a,b,c){if(console.log("intercepting",b),null!=a){var d=this,e=a[b],f=d.parent.children&&null!=d.parent.children[b],g=f?null:Object.getOwnPropertyDescriptor(a,b);try{c||this.redefineProp(a,b,g)}catch(h){if(!(h instanceof TypeError))throw h;return}a[b]=e}},this.redefineProp=function(a,b,c){var d=this;Object.defineProperty(a,b,{set:function(b){c&&c.set&&c.set.apply(a,arguments),b=c&&c.get&&c.get.apply(a)||b;var e=d.value;if(e!==b&&(d.value=b,Object.isArray(b)&&d.interceptArray(),d.valueChange(b,e),b instanceof Object))for(var f in d.children)if(d.children.hasOwnProperty(f)){var g=b[f];if(null!=e){var h=e[f];delete e[f],e[f]=h}d.children[f].interceptProp(b,f),b[f]=g}},get:function(){return c&&c.get&&c.get.apply(a)||d.value},enumerable:!0,configurable:!0})}},$cheeta.model=function(a,b){if(null==a)return $cheeta.model.root;for(var c=a.split(/ *\. *| *\[ */g),d=b[c[0]]||$cheeta.model.root,e=d===$cheeta.model.root?0:1;e<c.length;e++){var f=!1,g=c[e];if(g.search(/\( *$/)>-1){g.search(/\] */)>-1&&(g="["+g);break}g.search(/\] *$/)>-1&&(g=g.replace(/^ *'|'? *] *$/g,""),f=!0),d=d.children[g]||d.child(g,f)}return d},$cheeta.model.ArrayInterceptor=function(a){function b(b,c){if(b!==c){if(c>b)for(var d=b;c>d;d--)a.child(d).valueChange();a.child("length").valueChange(b,c)}}return{push:function(){var a=this.length,c=Array.prototype.push.apply(this,arguments),d=this.length;return b(d,a),c},pop:function(){var a=this.length,c=Array.prototype.pop.apply(this,arguments),d=this.length;return b(d,a),c},shift:function(){return this.splice(0,1)[0]},unshift:function(){var a=[].slice.apply(arguments);return a.unshift(0,0),this.splice.apply(this,a),this.length},splice:function(){var a=this.length,c=Array.prototype.splice.apply(this,arguments),d=this.length;return b(d,a),c}}},function(){var a=new $cheeta.Model("");a.value=window,$cheeta.model.root=a.child("$model"),window.$model=window.$model||{}}(),$cheeta.watchFns=[],$cheeta.watch=function(a,b){$cheeta.watchFns.push(b);var c=document.createElement("div");c.setAttribute("style","display:none"),c.setAttribute("watch.",a),c.setAttribute("onwatch.","$cheeta.watchFns["+($cheeta.watchFns.length-1)+"]()"),document.body.appendChild(c),$cheeta.compiler.compile([$cheeta.model.root],c)},$cheeta.future=function(a,b){$cheeta.future.evals.push(b?function(){setTimeout(a,b)}:a)},$cheeta.future.evals=$cheeta.future.evals||[],window.addEventListener("load",function(){$cheeta.isInitialized||($cheeta.isInitialized=!0,$cheeta.hash.init(),$cheeta.compiler.compile(document.documentElement,{}))},!1),$cheeta.directives={directives:{},globals:[],defaults:[],add:function(a){for(var b=a.name.split(","),c=0;c<b.length;c++){var d=b[c];this.directives[d]=this.directives[d]||[],this.directives[d].push(a),d.indexOf("*",d.length-1)>-1&&this.globals.push(a),""===d&&this.defaults.push(a)}},get:function(a){var b,c=[];a=a.toLowerCase();var d=a.split(".");for(""===d[d.length-1]&&d.pop(),b=0;b<d.length;b++){var e=d[b];c=c.concat(this.directives[d[b]]||[]);for(var f=0;f<this.globals.length;f++){var g=this.globals[f].name;0===e.replace(/^data-/,"").indexOf(0,g.substring(g.length-1))&&c.push(this.globals[b])}}return c.length?c:this.defaults},modelVarRegExp:/(((((\. *)?[^ \.!%-\-/:-?\^\[\]{-~\t\r\n'"]+)|\[ *([^ \.!%-\-/:-?\^\[\]{-~\t\r\n'"]+|'(\\'|[^'])*') *\]) *)+\(?)|('(\\'|[^'])*')/g,reservedWords:"(abstract|else|instanceof|super|boolean|enum|int|switch|break|export|interface|synchronized|byte|extends|let|this|case|false|long|throw|catch|final|native|throws|char|finally|new|transient|class|float|null|true|const|for|package|try|continue|function|private|typeof|debugger|goto|protected|var|default|if|public|void|delete|implements|return|volatile|do|import|short|while|double|in|static|with)",parse:function(a,b){var c=this,d=[];return a.replace(this.modelVarRegExp,function(a){if("'"!==a.charAt(0)&&'"'!==a.charAt(0)&&"true"!==a&&"false"!==a&&"undefined"!==a&&"null"!==a&&"NaN"!==a&&isNaN(a)){a=a.replace(/\[ *([^0-9'"].*?)\]/g,function(a,b){var e=c.parse(b);return d=d.concat(e.models),"["+e.ref+"]"});var e="";if(a=a.replace(new RegExp("(^|\\W)"+c.reservedWords+"(\\W|$)","g"),function(a,b,c,d){return e+=c+"|",b+"'"+c+"'"+d}),e.length>0){var f=c.parse(a);return d=d.concat(f.models),f.ref.replace(new RegExp("'("+e.slice(0,-1)+")'","g"),function(a){return a.slice(1,-1)})}var g=$cheeta.model(a,b);if(g instanceof Array){var h=g[0].ref();return h+(h.length>0&&"["!==g[1][0]?".":"")+g[1]}return d.push(g),g.ref()}return a}),d},modelAttr:function(elem,modelRefs){return function(name){function ensureParsed(){attr.parsedModels=attr.parsedModels||$cheeta.directives.parse(elem.getAttribute(name),modelRefs)}function listen(a,b){document.addEventListener("Oo-model-change-"+a.ref(),b,!1),elem.addEventListener("removed",function(){document.removeEventListener("Oo-model-change-"+a.ref(),b)},!1)}function makeWatch(a){return function(b){function c(a,c){return function(){c.val=attr.eval(),b.call(a,c.val,c.oldVal),c.oldVal=c.val}}ensureParsed();for(var d=0;d<attr.parsedModels.length;d++){var e=attr.parsedModels[d],f=c(e,a);listen(e,f,f),f(e,a)}}}var attr=elem.attributes[name];return null==attr?{modelValue:function(){return void 0}}:(attr.key=attr.name.replace(/^data-/,"").replace(/\.$/,""),attr.remove=function(){elem.removeAttribute(name)},attr.parsedModels=null,attr.watch=makeWatch({}),attr.eval=function(params){function keyList(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=","+c);return b.length?b.substring(1):b}function valueList(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function addModelParams(a){a=a||{};var b;for(b in a)a.hasOwnProperty(b)&&(a[b]=a[b]);for(b in modelRefs)modelRefs.hasOwnProperty(b)&&(a[b]=modelRefs[b].value);var c=$cheeta.model.root.children;for(b in c)void 0===a[b]&&c.hasOwnProperty(b)&&(a[b]=c[b].value);return a[$cheeta.model.root.names[0]]=$cheeta.model.root,a}ensureParsed(),params=addModelParams(params);var fn,escapedVal=attr.value.replace(/'/g,"\\'");return eval("var fn = function("+keyList(params)+"){return eval('"+escapedVal+"')};"),fn.apply(elem,valueList(params))},attr.models=function(){return ensureParsed(),attr.parsedModels},attr)}}},$cheeta.directive=function(a){return a.linkFn=function(b,c,d){var e=$cheeta.directives.modelAttr(b,d);return a.link.call(this,b,e(c),e,d)},$cheeta.directives.add(a),a},new MutationObserver(function(a){a.forEach(function(a){for(var b=a.removedNodes,c=0;c<b.length;c++)a.target.dispatchEvent(new CustomEvent("removed",{detail:{target:b.item(c)}}))})}),$cheeta.compiler={recursiveCompile:function(a,b,c,d,e){if(a){var f=!1;if(!e&&1===a.nodeType){if("script"===a.tagName.toLowerCase())if(!c||null!=a.parentNode&&"head"===a.parentNode.tagName.toLowerCase()||null!=a.type&&""!==a.type&&"text/javascript"!==a.type)"text/cheeta-template"===a.type&&($cheeta.templates[a.getAttribute("id")]=a.innerHTML||"");else{var g=a.innerHTML||"",h=document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.appendChild(document.createTextNode(g)),h.insertBefore(i,h.firstChild),h.removeChild(i)}var j=this.compileDirectives(a,b);f=j.skip,b=j.refs}f||this.recursiveCompile(a.firstChild,b,c),d||this.recursiveCompile(a.nextSibling,b,c)}},compileDirectives:function(a,b){for(var c,d=this.getAllDirectivesWithAttr(a),e=0;e<d.length;e++){var f=d[e],g=f.directive.linkFn(a,f.attrName,b);g&&(b=Object.copy(b),Object.copy(g,b)),c=c||f.directive.isTemplate}return{refs:b,skip:c}},getAllDirectivesWithAttr:function(a){var b,c,d=[],e=a.attributes;for(e[-1]={name:a.tagName},c=-1;c<e.length;c++)if(b=e[c],b.name.indexOf(".",b.name.length-1)>-1)for(var f=$cheeta.directives.get(b.name),g=0;g<f.length;g++)d.push({directive:f[g],attrName:b.name});return d.sort(function(a,b){return(a.directive.order||1e3)-(b.directive.order||1e3)}),d},doCompile:function(){this.recursiveCompile.apply(this,arguments),this.runFutures()},compile:function(a,b,c){this.doCompile(a,b,c,!0)},compileChildren:function(a,b,c){this.doCompile(a,b,c,!0,!0)},runFutures:function(){var runs=$cheeta.future.evals;$cheeta.future.evals=[];for(var i=0;i<runs.length;i++){var expr=runs[i];Object.isFunction(expr)?expr():eval(expr)}}},$cheeta.url=function(a){var b=document.createElement("a");return b.href=a,b.param=function(a,c){return b.search+=(b.search.indexOf("?")>-1?"&":"?")+a+"="+c,b},b.params=function(a){if(a)for(var c in a)$cheeta.isFunction(a[c])||b.param(c,a[c]);return b},b},$cheeta.http=function(a){a=a||this;var b=new XMLHttpRequest,c=b.send,d=b.open,e=0;b.open=function(){return d.apply(b,arguments),b},b.get=function(){return b.open.apply(b,["GET"].concat(Array.prototype.slice.call(arguments)))},b.post=function(){return b.open.apply(b,["POST"].concat(Array.prototype.slice.call(arguments)))},b.put=function(){return b.open.apply(b,["PUT"].concat(Array.prototype.slice.call(arguments)))},b["delete"]=function(){return b.open.apply(b,["DELETE"].concat(Array.prototype.slice.call(arguments)))},b.options=function(){return b.open.apply(b,["OPTIONS"].concat(Array.prototype.slice.call(arguments)))},b.send=function(){return c.apply(b,arguments),b},b.json=function(a){return b.header("Content-Type","application/json"),c.call(b,JSON.stringify(a)),b},b.header=function(a,c){b.setRequestHeader(a,c)};var f=[],g=[],h=[],i=[],j=[];return b.onError=function(a){return a&&h.push(a),b},b.onSuccess=function(a){return a&&f.push(a),b},b.after=function(a,c,d){b.onSuccess(a),b.onError(c),b.onProgress(d)},b.onComplete=function(a){return a&&g.push(a),b},b.onStateChange=function(a){return a&&i.push(a),b},b.onProgress=function(a){return a&&j.push(a),b},b.onreadystatechange=function(c){if(4===b.readyState){var d=b.data;if(200<=b.status&&b.status<300){for(e=0;e<f.length;e++)f[e].call(a,d);for(e=0;e<$cheeta.http.successCallbacks.length;e++)$cheeta.http.successCallbacks[e].call(a,d)}else{for(d=[b.status,b.data],e=0;e<h.length;e++)h[e].apply(a,d);for(e=0;e<$cheeta.http.errorCallbacks.length;e++)$cheeta.http.errorCallbacks[e].apply(a,d)}for(e=0;e<g.length;e++)g[e].call(a,d);for(e=0;e<$cheeta.http.completeCallbacks.length;e++)$cheeta.http.completeCallbacks[e].call(a,d)}for(e=0;e<i.length;e++)i[e].apply(a,c);for(e=0;e<$cheeta.http.stateChangeCallbacks.length;e++)$cheeta.http.stateChangeCallbacks[e].apply(a,c)},b.upload.addEventListener("progress",function(b){for(e=0;e<j.length;e++)j[e].apply(a,b);for(e=0;e<$cheeta.http.progressCallbacks.length;e++)$cheeta.http.progressCallbacks[e].apply(a,b)},!1),Object.defineProperty(b,"data",{get:function(){var a=b.getResponseHeader("Content-Type");return null!=a&&a.indexOf("application/json")>-1&&null!=b.responseText&&b.responseText.length?JSON.parse(b.responseText):b.responseText},enumerable:!0,configurable:!0}),b},$cheeta.http.successCallbacks=[],$cheeta.http.completeCallbacks=[],$cheeta.http.errorCallbacks=[],$cheeta.http.stateChangeCallbacks=[],$cheeta.http.progressCallbacks=[],$cheeta.http.onError=function(a){return a&&$cheeta.http.errorCallbacks.push(a),$cheeta.http},$cheeta.http.onSuccess=function(a){return a&&$cheeta.http.successCallbacks.push(a),$cheeta.http},$cheeta.http.onComplete=function(a){return a&&$cheeta.http.completeCallbacks.push(a),$cheeta.http},$cheeta.http.onStateChange=function(a){return a&&$cheeta.http.stateChangeCallbacks.push(a),$cheeta.http},$cheeta.http.onProgress=function(a){return a&&$cheeta.http.progressCallbacks.push(a),$cheeta.http},$cheeta.http.prototype=new XMLHttpRequest,$cheeta.api=function(a){$cheeta.isString(a)&&(a={url:a});var b=function(c){function d(b,c,d,f){e.$xhr().open(b,e.$resolveUrl(),a.async||!0).send(c).after(function(a,b){null!=b&&$cheeta.copy(b,e),d.call(e,b)}).onError(function(a,b){f&&f.call(e,a.status,b)})}$cheeta.copy(c,this);var e=this;this.$resolveUrl=function(){var b=this;return a.url.replace(/{:(\w+)}/,function(a,c){var d=b[c];return d?d:""})},this.$xhr=function(a){return a?a():new $cheeta.XHR},this.$create=function(a,b){return d("POST",null,a,b),this},this.$post=function(a,b){return d("POST",this,a,b),this},this.$put=this.$update=function(a,b){return d("PUT",this,a,b),this},this.$remove=function(a,b){return d("DELETE",null,a,b),this},this.$get=function(a,b){return d("GET",null,a,b),this},this.$query=function(a,c,d,e){return b.$query(this,c).after(d).error(e)}};return b.$query=function(c,d){var e,f,g=[];g.after=function(a){return e=a,this},g.error=function(a){return f=a,this};var h=c||c instanceof b?c:new b,i=d&&$cheeta.isString(d);return h.$xhr().open("GET",$cheeta.url(h.$resolveUrl(a.url)).params(c).toString(),a.async||!0).send().after(function(a,c){if(e){if(null==d);else if(i)for(var f=d.split("."),h=0;h<f.length;h++)c=c[f[h]];for(var j=0;j<c.length;j++)g[j]=new b(c[j]);e.call(this,c,g)}}).onError(function(a,b){f&&f.call(this,a.status,b)}),g},b},$cheeta.directive({name:"watch*",link:function(elem,attr){attr.watch(function(){eval(elem.attr("onwatch"))})}}),$cheeta.directive({name:"value",link:function(a,b){b.watch(function(b){a.type&&"checkbox"===a.type.toLowerCase()?a.checked=b:a.value!==b&&(a.value=b||null)})}}),$cheeta.directive({name:"bind",order:800,link:function(a,b){function c(){return a.type&&"checkbox"===a.type.toLowerCase()?a.checked:"input"===a.tagName.toLowerCase()||"textarea"===a.tagName.toLowerCase()?a.value:a.innerHTML}function d(b){a.on("change keydown keyup",function(){for(var a=0;a<b.length;a++)b[a].setValue(c())})}$cheeta.directives.get("value")[0].link(a,b),d(b.models())}}),$cheeta.directive({name:"text",link:function(a,b){b.watch(function(b){a.innerHTML="",a.appendChild(document.createTextNode(null==b?"":b))})}}),$cheeta.directive({name:"html",link:function(a,b){b.watch(function(b){b!==a.innerHTML&&(a.innerHTML=null==b?"":b)})}}),$cheeta.directive({name:"show",isTemplate:!0,link:function(a,b,c){b.watch(function(b){b?(a.style.display="",a.getAttribute("OoCompiled")||(a.setAttribute("OoCompiled",!0),$cheeta.compiler.compileChildren(a,c))):a.style.display="none"})}}),$cheeta.directive({name:"onaction",link:function(a,b){a.setAttribute("onclick.onkeydown-space-enter",b.value),b.remove()}}),$cheeta.directive({name:"init",link:function(a,b){$cheeta.future.evals.push(b.eval)}}),$cheeta.directive({name:"focus",link:function(a,b){b.watch(function(b){a.focus(b)})}}),$cheeta.directive({name:"",link:function(a,b){b.watch(function(c){var d=b.key;null==c?a.removeAttribute(d):a.setAttribute(d,c)})}}),$cheeta.directive({name:"model",order:200,link:function(a,b,c,d){for(var e=b.value.split(/ *, */g),f={},g=0;g<e.length;g++){var h=e[g].split(/ +: +/g),i=h[1]||h[0],j=h.length>1?h[0]:null,k=$cheeta.model(i,d);k.alias(j),f[j||k.names[0]]=k}return f}}),$cheeta.directive({name:"for",isTemplate:!0,order:100,counter:0,link:function(a,b,c,d){function e(a,b){if(a>b)for(var c=b;a>c;c++){var e=new El(h).attr("model.",g.index+":"+c);f.addBefore(e),$cheeta.compiler.compile(e,d)}}var f=document.createComment(a.outerHTML),g=this.parse(b.value);a.removeAttr("for.");var h,i=$cheeta.model(g.ref);i.watch(function(b,c){h=this.createTemplate(b,a,g),Object.isArray(b)&&(i.child("length").watch(e),b=b.length),e(b,c)})},createTemplate:function(a,b,c){Object.isArray(a)?(b.attr("attach.",c.ref+"["+c.variable+"]"),b.attr("model.",c.variable+":"+c.ref+"["+c.index+"]")):b.attr("attach.",c.index+" > "+c.ref);var d="O.iterate.tmpl"+this.counter++;return $cheeta.directive("template.").templates[d]=b.outerHTML,d},parse:function(a){var b=a.split(/ *: */g),c=b[1],d=b[0].split(/ *, */g);return{ref:c,index:d.length>1?d[0]:"O.iterateIndex",variable:d[d.length-1]}}}),$cheeta.directive({name:"on*",keyconsts:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,space:32,pause:19,"break":19,capslock:20,escape:27,esc:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,"down arrow":40,insert:45,"delete":46,colon:58,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,comma:188,dash:189,dot:190},link:function(a,b){var c=b.key.split("-");this.bindEvent(a,b,c[0],c.slice(1))},bindEvent:function(a,b,c,d){var e=function(a){var c=b.eval({$event:a});return c.preventDefault!==!1&&a.preventDefault(),c.stopPropagation!==!1&&a.stopPropagation(),Object.isObject(c)?c.value:c};if(0===c.indexOf("key")){var f=this.extractKeyCodes(d);f.length&&(e=function(a){f.indexOf(a.which)>-1&&e.call(this,a)})}a.addEventListener(c,e,!1)},extractKeyCodes:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(1===d.length)b[c]=d.charCodeAt(0);else if(b[c]=$cheeta.keyconsts[d.toLowerCase()],null==b[c]&&(b[c]=parseInt(d),isNaN(b[c])))throw"unknown key: "+d}return b}}),$cheeta.directive({name:"test",link:function(a,b,c){a.addClass("test"),$cheeta.future(function(){for(var c=a.previousElementSibling;c&&c.hasClass("test");)c=c.previousElementSibling;c&&!b.eval({$elem:c})&&(a.addClass("error"),a.attr("style","color:red"),a.innerHTML=b.value)},c("delay").modelValue()||1)}}),$cheeta.directive({name:"view,template",order:900,baseURL:window.location.protocol+"//"+window.location.hostname+(window.location.port&&":"+window.location.port)+window.location.pathname,loadView:function(a,b,c){a.innerHTML=b,$cheeta.compiler.compileChildren(a,c,!0)},cache:{},templates:{},loadingElements:{},link:function(a,b,c,d){var e=this;b.watch(function(b){if(!e.loadingElements[a]&&null!=b){e.loadingElements[a]=!0;try{var c=e.templates[b];if(null!=c)e.loadView(a,c,d);else{var f=0===b.indexOf("/")?e.baseURL+b:b;null!=e.cache[f]?e.loadView(a,e.cache[f],d):$cheeta.http(this).get(f).send().after(function(b){e.cache[f]=b,e.loadView(a,b,d)})}}finally{delete e.loadingElements[a]}}})}}),$cheeta.hash={keyval:{},watchers:{},watch:function(a,b){a instanceof Function&&(b=a,a=""),null==this.watchers[a]&&(this.watchers[a]=[]),-1===this.watchers[a].indexOf(b)&&this.watchers[a].push(b)},unwatch:function(a,b){b instanceof Function&&(a=b,b="");var c=this.watchers[b];if(null!=c){var d=c.indexOf(a);d>-1&&c.splice(d,1)}},notify:function(a,b,c){var d=this.watchers[a];if(null!=d)for(var e=0;e<d.length;e++)d[e](b,c)},set:function(a,b){void 0===b&&(b=a,a="");var c=this.keyval[a];this.keyval[a]=b;var d=this,e=function(){var a=d.keyval[""]||"";for(var b in d.keyval)b.length&&(a+=(a.length>0?"&":"")+b+"="+d.keyval[b]);return a};window.location.hash=e(),this.notify(a,b,c)},init:function(){var a=this,b=function(){var b,c,d=window.location.hash,e=0,f="",g={};try{d=d.substring(d.length>1&&"&"===d.charAt(2)?2:1);for(var h=0;h<=d.length;h++)"&"===d.charAt(h)||h===d.length?(b=d.substring(e,h),(null==a.keyval[f]||a.keyval[f]!==b)&&(c=a.keyval[f],a.keyval[f]=b,a.notify(f,b,c)),e=h+1,g[f]=!0,f=""):"="===d.charAt(h)&&(f=d.substring(e,h),e=h+1);for(f in a.keyval)null==g[f]&&(c=a.keyval[f],delete a.keyval[f],a.notify(f,null,c))}finally{a.value=d}};b(),window.addEventListener("hashchange",function(){b()},!1)},get:function(a){return this.keyval[a||""]}},$cheeta.route=$cheeta.route||function(a,b){if(null==a)return null;var c=0,d=null;for(var e in a)0===b.indexOf(e)&&c<e.length&&(c=e.length,d=a[e]);return d};